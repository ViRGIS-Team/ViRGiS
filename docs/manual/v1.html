<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ViRGIS App V1 | ViRGIS VR GIS </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ViRGIS App V1 | ViRGIS VR GIS ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="virgis-app-v1">ViRGIS App V1</h1>

<h2 id="project-schema">​Project Schema</h2>
<p>The ViRGIS project schema is a custom JSON schema developed based upon components of the following standards and pseudo-standards:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc7946">GeoJSON</a>,</li>
<li><a href="https://github.com/topojson/topojson-specification">TopoJSON,</a></li>
<li><a href="https://blog.geomodelr.com/geological-json-a-format-to-share-geological-knowledge/">GeologyJSON</a>,</li>
<li><a href="https://omf.readthedocs.io/en/latest/content/api.html">OMF</a>,</li>
<li><a href="https://www.ogc.org/standards/eo-geojson">EO-GeoJSON</a></li>
</ul>
<p>The Full Definition is Shown in the Scripting Refernce</p>
<h2 id="entity-data-schema--object-schema">​Entity Data Schema &amp; Object Schema</h2>
<p>ViRGIS App v1 will support the following types:</p>
<table>
  <tr>
   <td>Layer Type
   </td>
   <td>Feature Types
   </td>
   <td>Formats
   </td>
   <td>Feature Contents
   </td>
  </tr>
  <tr>
   <td>Point
   </td>
   <td>Point, Multipoint
   </td>
   <td>GeoJSON
   </td>
   <td>Datapoint GO
   </td>
  </tr>
  <tr>
   <td>Line
   </td>
   <td>Linestring, MultiLinestring
   </td>
   <td>GeoJSON
   </td>
   <td>Vertex GOs and Line  Segment GOs
   </td>
  </tr>
  <tr>
   <td>Polygon
   </td>
   <td>Polygon, MultiPolygon
   </td>
   <td>GeoJSON
   </td>
   <td>Vertex GOs, Line Segment GOs and a Mesh body.
   </td>
  </tr>
  <tr>
   <td>Mesh
   </td>
   <td>Mesh
   </td>
   <td>OBJ, OFF, STL
   </td>
   <td>Mesh
   </td>
  </tr>
  <tr>
   <td>PointCloud
   </td>
   <td>Point Cloud
   </td>
   <td>PLY
   </td>
   <td>Particle System
   </td>
  </tr>
  <tr>
   <td>Map
   </td>
   <td>Raster Tile 
   </td>
   <td>Mapbox
   </td>
   <td>Tilesystem
   </td>
  </tr>
  <tr>
   <td>Terrain
   </td>
   <td>Raster Tile
   </td>
   <td>Mapbox
   </td>
   <td>Mesh
   </td>
  </tr>
  <tr>
   <td>Map
   </td>
   <td>Vector Tile
   </td>
   <td>Mapbox
   </td>
   <td>Tilesystem
   </td>
  </tr>
</table>



<h2 id="data-ingestion">​Data Ingestion</h2>
<p>In ViRGIS App V1, data ingestion will be performed by a set of dedicated IO drivers. For the JSON based formats, these are based upon the <strong><a href="https://www.newtonsoft.com/json/help/html/Introduction.htm">Newtonsoft JSON.NET library</a></strong>[^1] using the <strong><a href="https://github.com/GeoJSON-Net/GeoJSON.Net">GeoJSON.NET</a></strong>[^2] type definitions to address GeoJSON objects. For the meshed based formats the geometry3Sharp library is used to create meshes from the raw data and for Point Clouds, a custom script reads the PLY and creates a Particle System.</p>
<p>ToDo add PCX </p>
<h2 id="georeference-framework">Georeference Framework</h2>
<p>The core of the GIS system is the Georeference framework that provides the basis for mapping from Real-World coordinates to VR-World coordinates in a zoomable map.</p>
<p>The ViRGIS Georeference Framework is based upon the <strong><a href="https://github.com/mapbox/mapbox-unity-sdk">Mapbox Unity SDK</a></strong>[^3].</p>
<h2 id="3d-geometry-tools">​3D Geometry Tools</h2>
<p>ViRGIS App V1 includes an implementation of <strong><a href="https://github.com/gradientspace/geometry3Sharp">geometry3Sharp</a></strong>[^4] to provide comprehensive and advanced 3D geometry tools.</p>
<p>As well as the usual geometry tools, this library has a comprehensive set of tools for 3D Mesh manipulation.</p>
<p>A key part of the integration of this toolkit into Unity and Mapbox is the marshalling of multiple data types across the three libraries. See Appendix 2 for details.</p>
<h2 id="event-system">​Event System</h2>
<p>In V1, the entity model maintains a basic event model using messaging up and down the entity tree. When an entity triggers an event (which is usually a leaf node - but not necessarily), that entity uses SendMessage to send the event to all its ancestors. When an entity receives an event, it can use BroadcastMessage to broadcast the event to all descendants, based upon the current state of the entity.</p>
<p>This relatively simple model preserves the entity structure into the event structure without needing any further configuration. The basic idea can be shown by the <code>Selected</code> event that is triggered on a component by the UI. This event is propagated up so that the Feature and Layer that this component is part of know that the event has occurred. If the feature is a line and is in <code>blockEdit</code> mode it will broadcast the <code>Selected</code> event to all of the components of the line.</p>
<p>There are following prototypes in the entity model:</p>
<ol>
<li><strong>IVirgisEntity</strong>. Covers all entities in the Virgis Entity Model</li>
<li><strong>IVirgisFeature</strong>. Covers all visible features and parts of Features (like lines)</li>
<li><strong>IVirgisLayer</strong>. Covers all GIS Layers in the model. Note that a GIS Layer in not the same thing as a Unity Layer. GIS layers are collections of like data. Unity Layers are used by Unity to categorise GameObjects. There is no connection between these concepts.</li>
</ol>
<p>There is also an event system called AppState that is used to communicate changes in the application state. This is explained further in the Scripting Reference</p>
<h2 id="user-interface">​User Interface</h2>
<p>The Overall VR Interface architecture is described in <a href="https://medium.com/runic-software/making-a-business-oriented-vr-interface-a42e37f3bbe4">this article</a></p>
<h3 id="guidelines">​Guidelines</h3>
<ol>
<li>This is NOT a game. This is an environment the user is exploring. The User&#39;s representation in the space is not a character. It does not need a body or (much) physics (although a bit of physics about how the user moves always make it easier on our brains). The User&#39;s representation in the space is a camera or probe that we use to explore the space.</li>
<li>The User is NOT the centre of the space. The data is the centre of the space. This is different from many mapping applications on the web and in games - where the space reveals itself almost infinitely as the User moves. This is GIS and in GIS - the data has bounds (called the &quot;extent&quot; of the data). We will use that paradigm. We move around in that extent.</li>
<li>We have two eyes and two hands. Therefore - the User Avatar has two cameras and two representations of hands. These are provide by the XR Rig (currently OVR XR Rig). The Game Space is set up with a putative scale of 1m in real-world to one Unity unit. But there is also internal scaling (ie. zoom factors) in the map that changes this. The space can be zoomed in-game.</li>
<li>Real users are going to demand the ability to look from multiple viewpoints without the effort of moving e.g &quot;in close&quot; to change things &quot;wide outside&quot; view to get the overview - or alternate angles to understand parallax effects. </li>
<li>The hands are used to control things. I can see three things they need to do :<ol>
<li>Select and manipulate,</li>
<li>Move the character,</li>
<li>Choose &quot;stuff&quot;.</li>
</ol>
</li>
<li>The user needs the ability to control the lighting.</li>
</ol>
<h3 id="design-decisions">​Design Decisions</h3>
<ol>
<li><strong>Guideline 1</strong> indicates that the avatars should be First Person view.</li>
<li><strong>Guideline 4</strong> suggests that an approach is to have a main avatar and one or more drones to get alternate views?</li>
<li>**Guideline 5a **Tt assumes that we need some sort of &quot;selecting&quot; widget. Something like a target on the Right hand and use the buttons on the right to select and manipulate. The joystick on the left could be used to zoom and rotate the space. </li>
<li><strong>Guideline 5b and c</strong> suggest that the left hand should have some sort of &quot;menu UI&quot; that allows you to make menu selections and the right joystick could be used to &quot;Jetpack&quot; move the avatar in the space - although actual real-world movement by the user in the available physical space would also move the avatar and together with zoom and rotation of the world that might be enough.</li>
</ol>
<h2 id="edit-session">​Edit Session</h2>
<p>This concept is common in GIS software. The basic concept is that changes to geospatial data are complicated and have many interdependencies - which means that a simple “undo” function can get you into more problems than solutions! Therefore, the usual concept is, effectively, to create a simple type of “checkpoint” at the start of an Edit Session and to always be able to get back to the “checkpoint”. The “checkpoint” is always what is currently saved in the data file.</p>
<!-- Footnotes themselves at the bottom. -->
<h2 id="notes">Notes</h2>
<p>[^1]:
     JSON.NET is a C# library and is available under an MIT Open Source Licence</p>
<p>[^2]:
     GeoJSON.NET is a C# library and is available under an MIT Open Source Licence</p>
<p>[^3]:
     Mapbox Unity SDK is a C# library that is available under an MIT Open Source Licence </p>
<p>[^4]:
     geometry3Sharp is a C# library that is available under a Boost Open Source Licence</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/runette/ViRGIS/blob/gh-pages/Documentation/manual/v1.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            ViRGIS VR GIS
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
